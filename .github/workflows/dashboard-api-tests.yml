name: Dashboard Api
on:
  push: 
    paths:
     - "dashboard-api/**"

jobs:
  tests:
    name: Tests
    runs-on: ubuntu-20.04
    env:
      PG_URL: postgres://root@localhost:5433/test
    steps:
      - name: Checkout Code
        uses: actions/checkout@v2
      - name: Setup Golang
        uses: actions/setup-go@v3
        with:
          go-version: '^1.18'
      - name: Setup Database
        run: ./test_db.sh
        working-directory: ./devops
      - name: Run Tests
        run: make test
        working-directory: ./dashboard-api
